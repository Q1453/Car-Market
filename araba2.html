<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Details</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{background:#f2f2f2;padding:40px;}

.top-bar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

.home-btn{
padding:10px 15px;
background:#ffcc00;
border:none;
cursor:pointer;
font-weight:bold;
}

.gallery{
position:relative;
max-width:800px;
margin:auto;
}

.gallery img{
width:100%;
height:380px;
object-fit:contain; /* changed from cover */
background:#000;    /* prevents ugly empty space */
border-radius:8px;
opacity:0;
transition:opacity 0.4s ease-in-out;
}

.gallery img.active {
opacity:1;
}

.arrow{
position:absolute;
top:50%;
transform:translateY(-50%);
font-size:30px;
background:rgba(0,0,0,0.5);
color:white;
padding:10px;
cursor:pointer;
user-select:none;
}

.left{left:10px;}
.right{right:10px;}

.image-counter{
position:absolute;
bottom:15px;
right:15px;
background:rgba(0,0,0,0.6);
color:white;
padding:6px 10px;
border-radius:20px;
font-size:14px;
}

/* Scroll indicator */
.scroll-indicator{
text-align:center;
margin-top:15px;
font-weight:bold;
animation:bounce 1.5s infinite;
}

@keyframes bounce{
0%,100%{transform:translateY(0);}
50%{transform:translateY(6px);}
}

.section{
background:white;
margin-top:30px;
padding:20px;
border-radius:8px;
max-width:800px;
margin-left:auto;
margin-right:auto;
}
</style>
</head>

<body>

<div class="top-bar">
<h1>2012 BMW X3</h1>
<button class="home-btn" onclick="location.href='index.html'">Home</button>
</div>

<div class="gallery">
    <span class="arrow left" onclick="prevImage()">❮</span>
    <img id="carImage" src="" alt="Car Image">
    <span class="arrow right" onclick="nextImage()">❯</span>
    <div class="image-counter" id="imageCounter"></div>
</div>

<div class="scroll-indicator">
▼ View Details Below ▼
</div>

<div class="section">
<h2>Summary</h2>
<p>
desc
</p>
</div>

<div class="section">
<h2>Details</h2>
<ul>
<li>Year: 2012</li>
<li>Mileage: 110,000 miles</li>
<li>Transmission: Automatic</li>
<li>Fuel Type: Petrol</li>
<li>Engine: 3.0L N52</li>
<li>Doors: 4</li>
<li>Colour: Sparkling Metallic Bronze</li>
<li>Notes: Left front fender and sunroof were locally painted</li>
</ul>
</ul>
</div>

<script>
const images = [
"front.jpeg",
"side1.jpeg",
"side2.jpeg",
"inside.jpeg",
"engine.jpeg"
];

let current = 0;
const imgElement = document.getElementById("carImage");
const counter = document.getElementById("imageCounter");

function preloadImages() {
    images.forEach(src => {
        const img = new Image();
        img.src = src;
    });
}

function showImage() {
    imgElement.classList.remove("active");

    setTimeout(() => {
        imgElement.src = images[current];
        counter.textContent = `${current + 1} / ${images.length}`;
        imgElement.classList.add("active");
    }, 150);
}

function nextImage() {
    current = (current + 1) % images.length;
    showImage();
}

function prevImage() {
    current = (current - 1 + images.length) % images.length;
    showImage();
}

document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") nextImage();
    if (e.key === "ArrowLeft") prevImage();
});

let startX = 0;

imgElement.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
});

imgElement.addEventListener("touchend", (e) => {
    let endX = e.changedTouches[0].clientX;
    let diff = startX - endX;

    if (diff > 50) nextImage();
    if (diff < -50) prevImage();
});

window.addEventListener("load", () => {
    preloadImages();
    showImage();
});
</script>

</body>
</html>
